<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#183c2f">
  <title>TeamWeave</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="bg-shapes" aria-hidden="true"></div>

  <header class="hero">
    <div class="hero-content">
      <p class="eyebrow">PWA Offline</p>
      <h1>TeamWeave</h1>
      <p class="subtitle">Carica il CSV del modulo e ottieni matrici, indicatori e rete dei reciproci positivi.</p>
    </div>
  </header>

  <main class="main">
    <section class="panel upload-panel">
      <h2>Caricamento dati</h2>
      <p>Il CSV deve avere le stesse colonne del primo foglio Excel (timestamp, nome, domande in ordine). Le colonne pari sono positive, le dispari negative.</p>
      <div class="upload-row">
        <input id="file-input" type="file" accept=".csv" multiple />
      </div>
      <div class="upload-row">
        <button id="export-link-btn" type="button">Genera codice dati</button>
        <button id="export-csv-btn" type="button">Scarica CSV</button>
        <button id="export-html-btn" type="button">Esporta HTML</button>
      </div>
      <div id="export-box" class="export-box hidden">
        <label for="export-link">Codice dati</label>
        <div class="export-row">
          <input id="export-link" type="text" readonly />
          <button id="copy-link-btn" type="button">Copia</button>
        </div>
        <p class="note">Il codice contiene i dati del CSV. Condividilo solo con chi deve vederli.</p>
      </div>
      <div class="import-box">
        <label for="import-code">Importa da codice</label>
        <textarea id="import-code" rows="4" placeholder="Incolla qui il codice dati..."></textarea>
        <button id="import-code-btn" type="button">Importa codice</button>
      </div>
      <div id="dataset-box" class="dataset-box hidden">
        <div class="dataset-row">
          <label for="dataset-select">Dataset attivo</label>
          <select id="dataset-select"></select>
        </div>
        <div class="dataset-row">
          <button id="delete-dataset-btn" type="button">Rimuovi dataset</button>
        </div>
        <div id="compare-row" class="dataset-row">
          <label for="compare-a">Confronto</label>
          <div class="compare-selects">
            <select id="compare-a"></select>
            <select id="compare-b"></select>
          </div>
        </div>
        <p id="compare-note" class="note">Delta mostrata come B - A.</p>
      </div>
      <div id="status" class="status" role="status"></div>
    </section>

    <section id="summary" class="summary hidden">
      <div class="summary-card">
        <span class="label">Atlete</span>
        <strong id="summary-athletes">0</strong>
      </div>
      <div class="summary-card summary-card-pos">
        <span class="label">Indice reciprocita +</span>
        <strong id="summary-reciproci-pos">0%</strong>
      </div>
      <div class="summary-card summary-card-neg">
        <span class="label">Indice reciprocita -</span>
        <strong id="summary-reciproci-neg">0%</strong>
      </div>
    </section>

    <section id="views" class="views hidden">
      <nav class="tabs" aria-label="Sezioni analisi">
        <button class="tab active" data-view="responses">Risposte</button>
        <button class="tab" data-view="matrix-pos">Matrice +</button>
        <button class="tab" data-view="matrix-neg">Matrice -</button>
        <button class="tab" data-view="reciproci-pos">Reciproci +</button>
        <button class="tab" data-view="reciproci-neg">Reciproci -</button>
        <button class="tab" data-view="forza-legami">Forza legami</button>
        <button class="tab" data-view="forza-antagonismo">Forza antagonismo</button>
        <button class="tab" data-view="non-ricambiate">Positive non ricambiate</button>
        <button class="tab" data-view="riassunto">Dati riassuntivi</button>
        <button class="tab" data-view="confronto">Confronto</button>
      </nav>

    <section id="view-container" class="view-container"></section>
    </section>
  </main>

  <footer class="footer">
    <p>Analisi locale: i dati restano sul dispositivo.</p>
  </footer>

  <script src="app.js"></script>
</body>
</html>
